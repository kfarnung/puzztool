import{j as e,t as w,s,c as C,v,C as u,B as N,f as j,g,L as D,M as E,N as P,O as T,Q as W,P as F,R as L}from"./index-46388ded.js";import{T as $,a as p}from"./Tabs-f17da97d.js";import{C as R,R as b,a as _}from"./Row-a4e3af67.js";import{R as B}from"./index-0920e4ba.js";const H="_container_rmimo_1",K={container:H};function l(t){function n(){const a=t.character.getPotentialMatch(t.direction);return a?a.toString():""}function r(a){const o=t.onChange;o&&o(a.currentTarget.checked?"add":"remove",t.direction)}return e.jsxs("div",{className:w(K.container,t.className),children:[e.jsx("input",{type:"checkbox",checked:t.character.hasDirection(t.direction),onChange:r}),e.jsx("label",{children:n()})]})}function M(t){const n={left:-1,right:-1},[r,a]=t.getDegrees();return r!==void 0&&(a===void 0?r<=180?n.right=r:n.left=r:r===0&&a<=180||r<=45&&a<180||a<=90||r>=270?(n.left=r,n.right=a):(n.right=r,n.left=a)),n}function y(t){const{left:n,right:r}=M(t.character);function a(){return n>=0?e.jsx("use",{transform:`rotate(${n}, 33, 32)`,x:"33",xlinkHref:n===0||n>=180?"#LeftFlag":"#Flag",y:"4"}):null}function o(){return r>=0?e.jsx("use",{transform:`rotate(${r}, 43, 32)`,x:"43",xlinkHref:r<=180?"#Flag":"#LeftFlag",y:"4"}):null}return e.jsxs("svg",{width:t.width,viewBox:"0 0 76 64",children:[e.jsxs("defs",{children:[e.jsxs("g",{id:"Person",fill:"black",children:[e.jsx("circle",{r:"3.5",cx:"4",cy:"4"}),e.jsx("rect",{y:"8",width:"8",height:"16",rx:"2",ry:"2"})]}),e.jsxs("g",{id:"Flag",children:[e.jsx("polyline",{strokeWidth:"1",stroke:"black",points:"0 0, 0 20"}),e.jsx("polyline",{strokeWidth:"2",strokeLinecap:"round",stroke:"black",points:"0 20, 0 28"}),e.jsx("rect",{stroke:"black",height:"10",width:"10"}),e.jsx("polygon",{fill:"red",points:"0 0, 10 0, 0 10"}),e.jsx("polygon",{fill:"yellow",points:"10 0, 10 10, 0 10"})]}),e.jsx("g",{id:"LeftFlag",children:e.jsx("use",{xlinkHref:"#Flag",transform:"scale(-1, 1)"})})]}),e.jsx("use",{xlinkHref:"#Person",x:"34",y:"23"}),a(),o(),"Sorry, your browser does not support inline SVG."]})}const z="_container_1ihdb_1",G="_north_1ihdb_8",I="_northEast_1ihdb_14",O="_east_1ihdb_20",V="_southEast_1ihdb_26",A="_south_1ihdb_26",Q="_southWest_1ihdb_38",q="_west_1ihdb_44",J="_northWest_1ihdb_50",i={container:z,north:G,northEast:I,east:O,southEast:V,south:A,southWest:Q,west:q,northWest:J};function U(t){function n(r,a){const o=t.onChange;o&&o(r,a)}return e.jsxs("div",{className:i.container,children:[e.jsx(l,{character:t.character,className:i.north,direction:s.SemaphoreDirection.North,onChange:n}),e.jsx(l,{character:t.character,className:i.northEast,direction:s.SemaphoreDirection.NorthEast,onChange:n}),e.jsx(l,{character:t.character,className:i.east,direction:s.SemaphoreDirection.East,onChange:n}),e.jsx(l,{character:t.character,className:i.southEast,direction:s.SemaphoreDirection.SouthEast,onChange:n}),e.jsx(l,{character:t.character,className:i.south,direction:s.SemaphoreDirection.South,onChange:n}),e.jsx(l,{character:t.character,className:i.southWest,direction:s.SemaphoreDirection.SouthWest,onChange:n}),e.jsx(l,{character:t.character,className:i.west,direction:s.SemaphoreDirection.West,onChange:n}),e.jsx(l,{character:t.character,className:i.northWest,direction:s.SemaphoreDirection.NorthWest,onChange:n}),e.jsx(y,{width:240,character:t.character})]})}const X="_container_nmko6_1",Y="_input_nmko6_22",Z="_view_nmko6_26",ee="_output_nmko6_31",x={container:X,input:Y,view:Z,output:ee},te=t=>({directions:t.encoding.semaphore.directions,stream:t.encoding.semaphore.stream}),ne={append:D,backspace:E,clear:P,setDirections:T,space:W},re=C(te,ne);function ae(t){v.useEffect(()=>{function d(c){if(c.defaultPrevented)return;let m=!1;c.keyCode===8&&(t.backspace(),m=!0),m&&c.preventDefault()}function h(c){if(c.defaultPrevented)return;let m=!1;if(c.keyCode===13)o(),m=!0;else if(c.charCode>=49&&c.charCode<=56){const k=new s.SemaphoreCharacter;k.directions=t.directions;const S=s.SemaphoreDegrees.FromDegrees((c.charCode-49)*45);r(k.hasDirection(S)?"remove":"add",S)}m&&c.preventDefault()}return document.addEventListener("keydown",d),document.addEventListener("keypress",h),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keypress",h)}});function n(){t.backspace()}function r(d,h){const c=new s.SemaphoreCharacter;switch(c.directions=t.directions,d){case"add":c.addDirection(h);break;case"remove":c.removeDirection(h);break;default:throw new Error("Invalid change type")}t.setDirections(c.directions)}function a(){t.clear()}function o(){const d=new s.SemaphoreCharacter;d.directions=t.directions;const h=d.getExactMatches();h.length>0?t.append(h[0].toString()):t.space()}const f=new s.SemaphoreCharacter;return f.directions=t.directions,e.jsxs("div",{className:x.container,children:[e.jsxs(u,{className:x.input,children:[e.jsx(u.Header,{children:"Input"}),e.jsx(u.Body,{children:e.jsxs(R,{fluid:!0,children:[e.jsxs(b,{children:[e.jsx(_,{xs:"auto",sm:"auto",md:"auto",children:e.jsx(U,{character:f,onChange:r})}),e.jsx(_,{children:e.jsx("div",{className:x.view,children:f.toString()||"?"})})]}),e.jsx(b,{children:e.jsx(_,{children:e.jsxs(N,{children:[e.jsx(j,{children:e.jsx(g,{onClick:n,children:"âŒ«"})}),e.jsx(j,{children:e.jsx(g,{onClick:o,children:"Next"})}),e.jsx(j,{children:e.jsx(g,{onClick:a,variant:"danger",children:"Clear"})})]})})})]})})]}),e.jsxs(u,{children:[e.jsx(u.Header,{children:"Output"}),e.jsx(u.Body,{children:e.jsxs("pre",{className:x.output,children:[t.stream,e.jsx("span",{className:"blinking-cursor",children:"|"})]})})]})]})}const ce=re(ae);function se(){const t=new s.SemaphoreCharacter().getPotentialMatches();return e.jsx(B,{children:t.map(n=>e.jsxs("div",{children:[e.jsx(y,{width:96,character:new s.SemaphoreCharacter(n.encoding,n.category)}),e.jsx("br",{}),n.display]},n.display))})}const oe=t=>({selectedTab:t.encoding.semaphore.selectedTab}),ie={selectTab:L},he=C(oe,ie);function le(t){return e.jsx(F,{title:"Semaphore",children:e.jsxs($,{activeKey:t.selectedTab,id:"Semaphore-tabs",onSelect:t.selectTab,children:[e.jsx(p,{eventKey:"1",title:"Value",children:e.jsx(ce,{})}),e.jsx(p,{eventKey:"2",title:"Reference",children:e.jsx(se,{})})]})})}const fe=he(le);export{fe as default};
